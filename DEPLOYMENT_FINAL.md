# üöÄ –§–ò–ù–ê–õ–¨–ù–´–ô DEPLOYMENT CHECKLIST
## –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ –æ–ø—ã—Ç–Ω—ã–º –¥–µ–ø–ª–æ–π-–∏–Ω–∂–µ–Ω–µ—Ä–æ–º

**–î–∞—Ç–∞:** 09.10.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í –ö PRODUCTION  
**–í–µ—Ä—Å–∏—è:** 1.0.0

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –£–†–û–ö–ò –ü–†–û–®–õ–´–• –û–®–ò–ë–û–ö

### üî¥ –ü—Ä–æ–±–ª–µ–º–∞ #1: CRLF vs LF (–ò–°–ü–†–ê–í–õ–ï–ù–û)
**–ë—ã–ª–æ:** SyntaxError –Ω–∞ Linux CI –∏–∑-–∑–∞ Windows line endings  
**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω `.gitattributes` —Å `*.py text eol=lf`  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ FIXED

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
git ls-files --eol | grep "i/crlf"  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ –¥–ª—è .py —Ñ–∞–π–ª–æ–≤
```

### üü° –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–ª—è Railway

1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –∫–∞—Ç–∞–ª–æ–≥**
   - Railway –∑–∞–ø—É—Å–∫–∞–µ—Ç –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
   - –ü—É—Ç—å –∫ `bot/main.py` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º
   - ‚úÖ Procfile: `worker: python bot/main.py`

2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   - BOT_TOKEN –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
   - ADMIN_CHAT_ID –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
   - –ë–µ–∑ –Ω–∏—Ö –±–æ—Ç —É–ø–∞–¥—ë—Ç –Ω–∞ —Å—Ç–∞—Ä—Ç–µ

3. **Lock —Ñ–∞–π–ª—ã –±–ª–æ–∫–∏—Ä—É—é—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫**
   - `bot.lock` –∏ `bot.pid` –º–æ–≥—É—Ç –æ—Å—Ç–∞—Ç—å—Å—è –ø–æ—Å–ª–µ –∫—Ä–∞—à–∞
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –≤ `.gitignore` –∏ `.railwayignore`

---

## ‚úÖ PRE-DEPLOYMENT CHECKLIST

### üéØ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–ë–õ–û–ö–ï–†–´)

- [x] **–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç** (97 passed, 6 skipped)
- [x] **Flake8 —á–∏—Å—Ç** (0 errors –≤ production –∫–æ–¥–µ)
- [x] **`.gitattributes` —Å–æ–∑–¥–∞–Ω** (–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è line endings)
- [x] **`Procfile` –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω** (worker: python bot/main.py)
- [x] **`runtime.txt` —É–∫–∞–∑–∞–Ω** (python-3.10.12)
- [x] **`requirements.txt` –∞–∫—Ç—É–∞–ª–µ–Ω** (–≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
- [x] **`.env` –≤ `.gitignore`** (–Ω–µ—Ç —É—Ç–µ—á–∫–∏ —Å–µ–∫—Ä–µ—Ç–æ–≤)
- [x] **`railway.json` –Ω–∞—Å—Ç—Ä–æ–µ–Ω** (restart policy)
- [x] **Bot token –ù–ï –≤ –∫–æ–¥–µ** (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ env vars)
- [x] **–ù–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥ —Å–µ–∫—Ä–µ—Ç–æ–≤** (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ)

### üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

- [x] **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ** (loguru —Å —É—Ä–æ–≤–Ω—è–º–∏)
- [x] **Graceful shutdown —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω** (SIGTERM handling)
- [x] **Security –º–æ–¥—É–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç** (79% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- [x] **Error handling –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç** (try/except –≤ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö)
- [x] **File size limits —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã** (20MB —Ñ–æ—Ç–æ, 300MB –≤–∏–¥–µ–æ)
- [x] **Rate limiting –∞–∫—Ç–∏–≤–µ–Ω** (–∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞)
- [x] **Flood control —Ä–∞–±–æ—Ç–∞–µ—Ç** (2 —Å–µ–∫ –º–µ–∂–¥—É –¥–µ–π—Å—Ç–≤–∏—è–º–∏)

### üìä –ú–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|----------|--------|
| –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ | 34% | üü° –î–æ–ø—É—Å—Ç–∏–º–æ –¥–ª—è MVP |
| Flake8 errors | 0 | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –±–∞–≥–∏ | 0 | ‚úÖ –ß–∏—Å—Ç–æ |
| Security score | 79% | ‚úÖ –•–æ—Ä–æ—à–æ |
| –ü—Ä–æ—à–ª—ã—Ö —Ç–µ—Å—Ç–æ–≤ | 97/103 | ‚úÖ 94% |

---

## üöÄ DEPLOYMENT STEPS

### –®–∞–≥ 1: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–¥–∞

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
git status

# 2. –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Å—Ç–æ–≤
python -m pytest tests/ -v --tb=short

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ flake8
python -m flake8 bot/ --max-line-length=120 --count

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –¥–µ–ø–ª–æ—é
python check_deploy_ready.py
```

### –®–∞–≥ 2: –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
# –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .gitattributes
git add TESTING_REPORT.md
git add DEPLOYMENT_FINAL.md
git add bot/main.py
git add bot/handlers.py

# –ö–æ–º–º–∏—Ç —Å –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
git commit -m "fix: line endings + flake8 cleanup + deployment prep

- –î–æ–±–∞–≤–ª–µ–Ω .gitattributes –¥–ª—è LF –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã 2 E501 warnings –≤ production –∫–æ–¥–µ
- –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (TESTING_REPORT.md)
- –§–∏–Ω–∞–ª—å–Ω—ã–π deployment checklist (DEPLOYMENT_FINAL.md)
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (97/103)
- Production –∫–æ–¥ flake8 —á–∏—Å—Ç

Fixes #issue_number"

# –ü—É—à –≤ main
git push origin main
```

### –®–∞–≥ 3: Deploy –Ω–∞ Railway

#### 3.1 –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

1. –ó–∞–π—Ç–∏ –Ω–∞ https://railway.app
2. New Project ‚Üí Deploy from GitHub repo
3. –í—ã–±—Ä–∞—Ç—å `RPRZ_DANGER` —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç:
   - Python –ø—Ä–æ–µ–∫—Ç (–ø–æ `runtime.txt`)
   - Worker —Ç–∏–ø (–ø–æ `Procfile`)
   - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–ø–æ `requirements.txt`)

#### 3.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û - –±–µ–∑ –Ω–∏—Ö –±–æ—Ç –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è!**

```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
BOT_TOKEN=<–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather>
ADMIN_CHAT_ID=<–≤–∞—à_telegram_chat_id>

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ (–¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
LOG_LEVEL=INFO
SPAM_LIMIT=5
FLOOD_INTERVAL=2
MAX_FILE_SIZE_MB=20
MAX_VIDEO_SIZE_MB=300

# –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
SECURITY_ENABLED=true
```

**–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –≤ Railway:**
1. –ü—Ä–æ–µ–∫—Ç ‚Üí Variables
2. New Variable –¥–ª—è –∫–∞–∂–¥–æ–π
3. Deploy ‚Üí Restart

#### 3.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ø–ª–æ—è

```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ –≤ Railway
# Dashboard ‚Üí Deployments ‚Üí View Logs

# –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –ª–æ–≥–∞—Ö:
‚úÖ "‚úÖ –ú–æ–¥—É–ª—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∂–µ–Ω"
‚úÖ "‚úÖ SecurityManager –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω"
‚úÖ "ü§ñ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!"
‚úÖ "‚úÖ Telegram –±–æ—Ç —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω"

# –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
‚ùå "SyntaxError"
‚ùå "ModuleNotFoundError"
‚ùå "BOT_TOKEN not found"
‚ùå "ConnectionError"
```

### –®–∞–≥ 4: Post-Deployment —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 4.1 Smoke tests

```
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å /start –±–æ—Ç—É
   ‚úÖ –û–∂–∏–¥–∞–µ—Ç—Å—è: –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å 4 –∫–Ω–æ–ø–∫–∞–º–∏

2. –ù–∞–∂–∞—Ç—å "‚ùó –°–æ–æ–±—â–∏—Ç–µ –æ–± –æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
   ‚úÖ –û–∂–∏–¥–∞–µ—Ç—Å—è: –ó–∞–ø—Ä–æ—Å –æ–ø–∏—Å–∞–Ω–∏—è

3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç
   ‚úÖ –û–∂–∏–¥–∞–µ—Ç—Å—è: –ó–∞–ø—Ä–æ—Å –ª–æ–∫–∞—Ü–∏–∏

4. –ù–∞–∂–∞—Ç—å "‚¨ÖÔ∏è –ù–∞–∑–∞–¥"
   ‚úÖ –û–∂–∏–¥–∞–µ—Ç—Å—è: –í–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å rate limiting
   –û—Ç–ø—Ä–∞–≤–∏—Ç—å 10+ —Å–æ–æ–±—â–µ–Ω–∏–π –±—ã—Å—Ç—Ä–æ
   ‚úÖ –û–∂–∏–¥–∞–µ—Ç—Å—è: "‚è≥ –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤"
```

#### 4.2 Load testing (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
pip install pytest-xdist
pytest tests/test_security.py::TestSecurityManager::test_spam_protection_scenario -v

# –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å PASSED
```

---

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ PRODUCTION

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã

1. **Rate Limiting** ‚úÖ
   - 5 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
   - Whitelist –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
   - Blacklist –¥–ª—è banned users

2. **Flood Control** ‚úÖ
   - 2 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É –¥–µ–π—Å—Ç–≤–∏—è–º–∏
   - –°—á—ë—Ç—á–∏–∫ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏

3. **Input Validation** ‚úÖ
   - –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏–Ω—ã (–º–∞–∫—Å 4096 —Å–∏–º–≤–æ–ª–æ–≤)
   - SQL injection protection
   - XSS protection
   - Path traversal protection

4. **File Security** ‚úÖ
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ (20MB —Ñ–æ—Ç–æ, 300MB –≤–∏–¥–µ–æ)
   - MIME type validation
   - Extension whitelist

5. **Secrets Management** ‚úÖ
   - –ù–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤
   - .env –≤ .gitignore
   - Environment variables only

### ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **SSL Warnings Disabled** üü°
   ```python
   # bot/main.py:39
   urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)
   ```
   - –†–∏—Å–∫: MitM –∞—Ç–∞–∫–∏
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –í–∫–ª—é—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è dev
   - Fix: `if os.getenv("ENV") == "development":`

2. **EXIF Data –Ω–µ –æ—á–∏—â–∞–µ—Ç—Å—è** üü°
   - –†–∏—Å–∫: –£—Ç–µ—á–∫–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∏–∑ —Ñ–æ—Ç–æ
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –î–æ–±–∞–≤–∏—Ç—å PIL/Pillow –¥–ª—è –æ—á–∏—Å—Ç–∫–∏
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: P1

3. **Safety Consultant –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω** üî¥
   - –ë–ª–æ–∫–∏—Ä—É–µ—Ç: 3 —Ç–µ—Å—Ç–∞
   - –°—Ç–∞—Ç—É—Å: TODO
   - ETA: 5-7 –¥–Ω–µ–π

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì PRODUCTION

### Railway Dashboard

**–ß—Ç–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å:**

1. **CPU Usage**
   - –ù–æ—Ä–º–∞: 5-20%
   - –ê–ª–µ—Ä—Ç: >80%
   - –ü—Ä–∏—á–∏–Ω–∞: –í–æ–∑–º–æ–∂–Ω–∞—è —É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ –∏–ª–∏ infinite loop

2. **Memory**
   - –ù–æ—Ä–º–∞: 100-200 MB
   - –ê–ª–µ—Ä—Ç: >500 MB
   - –ü—Ä–∏—á–∏–Ω–∞: –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ user_states/user_data

3. **Restart Count**
   - –ù–æ—Ä–º–∞: 0-1 –≤ –¥–µ–Ω—å
   - –ê–ª–µ—Ä—Ç: >5 –≤ —á–∞—Å
   - –ü—Ä–∏—á–∏–Ω–∞: –ö—Ä–∞—à–∏, –Ω–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏, –æ—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

4. **Request Rate**
   - –ù–æ—Ä–º–∞: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ê–ª–µ—Ä—Ç: –í–Ω–µ–∑–∞–ø–Ω—ã–µ –≤—Å–ø–ª–µ—Å–∫–∏
   - –ü—Ä–∏—á–∏–Ω–∞: –í–æ–∑–º–æ–∂–Ω–∞—è –∞—Ç–∞–∫–∞ –∏–ª–∏ –≤–∏—Ä—É—Å–Ω–æ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ

### –õ–æ–≥–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

```bash
# Railway Logs
# Filters ‚Üí Level ‚Üí Error

# –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:
"üö´ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ"  # Rate limit triggered
"‚ö†Ô∏è –§–ª—É–¥ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"      # Flood control triggered
"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ"       # Handler errors
"ADMIN_ERROR"                  # Critical errors
```

### –ê–ª–µ—Ä—Ç–∏–Ω–≥ (–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å)

```bash
# Slack/Telegram webhook –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫
# Railway ‚Üí Integrations ‚Üí Webhooks

# –¢—Ä–∏–≥–≥–µ—Ä—ã:
- Deployment failed
- Service crashed (3+ times in 5 min)
- Memory >80%
- Error rate >10% requests
```

---

## üîÑ ROLLBACK PLAN

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–∫–∞—Ç

```bash
# Railway Dashboard
1. Deployments ‚Üí Previous deployment
2. Three dots (...) ‚Üí Redeploy
3. Confirm

# –ë–æ—Ç –≤–µ—Ä–Ω—ë—Ç—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –∑–∞ 30-60 —Å–µ–∫—É–Ω–¥
```

### Git rollback

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
git log --oneline  # –ù–∞–π—Ç–∏ last working commit
git revert <commit_hash>
git push origin main

# Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –æ—Ç–∫–∞—Ç
```

### Emergency stop

```bash
# Railway Dashboard
Project ‚Üí Settings ‚Üí Service ‚Üí Stop

# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö:
- –ú–∞—Å—Å–æ–≤–∞—è —É—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –ù–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ —Å–ø–∞–º–∞
- –ö—Ä–∏—Ç–∏—á–Ω–∞—è —É—è–∑–≤–∏–º–æ—Å—Ç—å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞
```

---

## üìã POST-DEPLOYMENT TASKS

### –ß–µ—Ä–µ–∑ 1 —á–∞—Å –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ errors
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ (CPU/Memory)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∞–¥–º–∏–Ω –ø–æ–ª—É—á–∏–ª —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### –ß–µ—Ä–µ–∑ 24 —á–∞—Å–∞

- [ ] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å usage patterns
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å security logs –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ restart count = 0
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

### –ß–µ—Ä–µ–∑ 1 –Ω–µ–¥–µ–ª—é

- [ ] –°–æ–±—Ä–∞—Ç—å feedback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å slow queries (–µ—Å–ª–∏ –µ—Å—Ç—å DB)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –ª–æ–≥–æ–≤
- [ ] –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò (ROADMAP)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç P0 (Critical)

1. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Safety Consultant**
   - LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (OpenAI/Anthropic)
   - RAG –¥–ª—è PDF knowledge base
   - ETA: 7 –¥–Ω–µ–π

2. **–ü–æ–≤—ã—Å–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –¥–æ 50%+**
   - –î–æ–±–∞–≤–∏—Ç—å tests/test_main_handlers.py
   - 20+ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤
   - ETA: 3 –¥–Ω—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç P1 (High)

3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD**
   - GitHub Actions –¥–ª—è –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤
   - Codecov –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è
   - ETA: 1 –¥–µ–Ω—å

4. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å SSL warnings**
   - –í–∫–ª—é—á–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ dev —Ä–µ–∂–∏–º–µ
   - ETA: 30 –º–∏–Ω—É—Ç

5. **EXIF –æ—á–∏—Å—Ç–∫–∞**
   - –î–æ–±–∞–≤–∏—Ç—å PIL/Pillow
   - –û—á–∏—â–∞—Ç—å metadata –∏–∑ —Ñ–æ—Ç–æ
   - ETA: 2 —á–∞—Å–∞

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç P2 (Nice to have)

6. **Type hints**
   - 100% —Ñ—É–Ω–∫—Ü–∏–π —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏
   - ETA: 2 –¥–Ω—è

7. **Pre-commit hooks**
   - black, flake8, mypy
   - ETA: 1 —á–∞—Å

8. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**
   - Docstrings –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
   - ETA: 1 –¥–µ–Ω—å

---

## üìû –ö–û–ù–¢–ê–ö–¢–´ –ü–û–î–î–ï–†–ñ–ö–ò

**–≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞:**
- Railway Support: https://railway.app/help
- Telegram Bot API Status: https://t.me/BotNews

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- Railway Docs: https://docs.railway.app
- Telegram Bot API: https://core.telegram.org/bots/api
- Python aiogram: https://docs.aiogram.dev

**–ö–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞:**
- GitHub Issues: https://github.com/your-org/RPRZ_BOT/issues
- Telegram: @your_support_contact

---

## ‚úÖ –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–µ–¥ git push
./pre_deploy_check.sh
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:

```bash
# 1. –¢–µ—Å—Ç—ã
python -m pytest tests/ -v --tb=short -x

# 2. Flake8
python -m flake8 bot/ --max-line-length=120

# 3. –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
python check_deploy_ready.py

# –í—Å–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ‚úÖ GREEN
```

---

## üéâ –ì–û–¢–û–í –ö –î–ï–ü–õ–û–Æ!

**–ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ `git push`:**

- [x] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [x] Flake8 —á–∏—Å—Ç
- [x] .gitattributes —Å–æ–∑–¥–∞–Ω
- [x] –°–µ–∫—Ä–µ—Ç—ã –Ω–µ –≤ –∫–æ–¥–µ
- [x] Railway.json –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [x] Rollback plan –≥–æ—Ç–æ–≤

**–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–µ–ø–ª–æ—è:**

```bash
git add .
git commit -m "production: –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é v1.0.0"
git push origin main
```

**–ü–æ—Å–ª–µ –ø—É—à–∞:**
1. –û—Ç–∫—Ä—ã—Ç—å Railway Dashboard
2. –ñ–¥–∞—Ç—å "Deployment Successful"
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç–∞
5. üçæ Celebrate!

---

**–ê–≤—Ç–æ—Ä:** Senior DevOps Engineer  
**–î–∞—Ç–∞:** 09.10.2025  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ PRODUCTION READY
